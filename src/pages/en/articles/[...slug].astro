---
import { getCollection } from 'astro:content';
import Layout from '../../../layouts/Layout.astro';
import Header from '../../../components/Header.astro';
import NewFooter from '../../../components/NewFooter.astro';

export async function getStaticPaths() {
  const articles = await getCollection('articles');
  return articles
    .filter(article => article.data.lang === 'en')
    .map(article => ({
      params: { slug: article.slug },
      props: { article },
    }));
}

const { article } = Astro.props;
const { Content } = await article.render();
---

<Layout title={`${article.data.title} | Umaru Creative`} description={article.data.description}>
  <Header />
  
  <main class="pt-32 pb-20">
    <article class="container mx-auto px-6 md:px-12">
      <div class="max-w-3xl mx-auto">
        <header class="mb-12">
          {article.data.image && (
            <img 
              src={article.data.image} 
              alt={article.data.title}
              class="w-full h-64 md:h-96 object-cover rounded-xl mb-8"
            />
          )}
          
          <h1 class="font-alexandria font-bold text-4xl md:text-5xl mb-4">
            {article.data.title}
          </h1>
          
          <div class="flex items-center gap-4 text-primary-600">
            <span>{article.data.author}</span>
            <span>•</span>
            <time datetime={article.data.pubDate.toISOString()}>
              {article.data.pubDate.toLocaleDateString('en', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
              })}
            </time>
          </div>
        </header>
        
        <div class="prose prose-lg max-w-none">
          <Content />
        </div>
        
        <div class="mt-12 pt-8 border-t border-primary-100">
          <a 
            href="/en/articles/"
            class="inline-block px-6 py-3 bg-accent-100 text-primary-900 rounded-md font-alexandria hover:bg-accent-200 transition-colors"
          >
            ← Back to Articles
          </a>
        </div>
      </div>
    </article>
  </main>
  
  <NewFooter />
</Layout>