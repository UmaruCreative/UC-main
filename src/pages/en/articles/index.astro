---
import { getCollection } from 'astro:content';
import Layout from '../../../layouts/Layout.astro';
import Header from '../../../components/Header.astro';
import NewFooter from '../../../components/NewFooter.astro';

const articles = await getCollection('articles', ({ data }) => data.lang === 'en');
articles.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout title="Blog | Umaru Creative">
  <Header />
  
  <main class="pt-32 pb-20">
    <div class="container mx-auto px-6 md:px-12">
      <div class="max-w-4xl mx-auto">
        <h1 class="font-alexandria font-bold text-4xl md:text-5xl mb-12">Blog</h1>
        
        <div class="grid gap-8 md:grid-cols-2">
          {articles.map(article => (
            <article class="bg-white rounded-xl shadow-sm border border-primary-100 overflow-hidden hover:shadow-lg transition-shadow duration-300">
              {article.data.image && (
                <img 
                  src={article.data.image} 
                  alt={article.data.title}
                  class="w-full h-48 object-cover"
                />
              )}
              <div class="p-6">
                <h2 class="font-alexandria font-bold text-xl mb-2">
                  <a href={`/en/articles/${article.slug}`} class="hover:text-primary-600 transition-colors">
                    {article.data.title}
                  </a>
                </h2>
                <p class="text-primary-700 mb-4">{article.data.description}</p>
                <div class="flex items-center justify-between text-sm text-primary-600">
                  <span>{article.data.author}</span>
                  <time datetime={article.data.pubDate.toISOString()}>
                    {article.data.pubDate.toLocaleDateString('en', { 
                      year: 'numeric', 
                      month: 'long', 
                      day: 'numeric' 
                    })}
                  </time>
                </div>
              </div>
            </article>
          ))}
        </div>
      </div>
    </div>
  </main>
  
  <NewFooter />
</Layout>